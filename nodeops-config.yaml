# NodeOps Template Configuration for AuditForge
# AI-powered smart contract security auditor for DePIN and NodeOps ecosystems

# Defines the version of the configuration format
version: 0.1

# Services are a collection of workloads that work together
services:
  # Defines a workload named 'auditforge'
  auditforge:
    # Specify the container image name; Make sure image is public
    image: shivamsoni20/auditforge:latest

    # Determines when to fetch the latest version of the workload
    imagePullPolicy: Always

    # Defines the command to run; empty by default
    command: []

    # Specifies arguments for the command; empty by default
    args: []

    # Defines network-related settings
    ports:
      - containerPort: 3000 # Combined Frontend & Backend (React + Express)
        protocol: TCP
        expose: true # This will generate the URL for the application

    # Environment variables (required for production deployment)
    env:
      # Node.js environment
      - name: NODE_ENV
        value: production
      
      # Application port (serves both frontend and API)
      - name: PORT
        value: "3000"
      
      # AIML API Configuration (Required for AI-powered audit features)
      # Replace 'your_aiml_api_key_here' with your actual AIML API key
      - name: AIML_API_KEY
        value: e40f03e41b7e4e65a59bab4f83abbc2d
      
      # AIML API Base URL (optional, defaults to https://api.aimlapi.com/v1)
      - name: AIML_BASE_URL
        value: https://api.aimlapi.com/v1

    # Specifies the minimum resource allocation
    # This also specify the template price
    resourceUsage:
      idle:
        cpu: 1000 # CPU allocation (1 core = 1000 millicores)
        memory: 1024 # Memory allocation in MB (1GB)
